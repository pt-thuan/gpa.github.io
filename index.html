<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GPA Calculator</title>
  <style>
    body {
      background-color: #f0f4f8;
      font-family: Arial, sans-serif;
      color: #333;
      max-width: 600px;
      margin: auto;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #2d6a4f;
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #2d6a4f;
      color: white;
      font-weight: bold;
      cursor: pointer;
      border: none;
    }
    button:hover {
      background-color: #40916c;
    }
    .result {
      margin-top: 20px;
      font-weight: bold;
      white-space: pre-line;
    }
  </style>
</head>
<body>

<h1>ðŸŽ“ GPA Calculator</h1>

<label for="completedGPA">Your current GPA:</label>
<input type="number" id="completedGPA" placeholder="e.g. 3.53" step="0.01">

<label for="completedCredits">Credits completed:</label>
<input type="number" id="completedCredits" placeholder="e.g. 102">

<label for="remainingCredits">Remaining credits:</label>
<input type="number" id="remainingCredits" placeholder="e.g. 36">

<label for="targetGPA">Expected GPA:</label>
<input type="number" id="targetGPA" placeholder="e.g. 3.6" step="0.01">

<button onclick="calculate()">Calculate Required GPA</button>

<div class="result" id="output"></div>

<script>
  const gradeTable = [
    { grade: "A+", point: 4.0 },
    { grade: "A", point: 3.7 },
    { grade: "B+", point: 3.5 },
    { grade: "B", point: 3.0 },
    { grade: "C+", point: 2.5 },
    { grade: "C", point: 2.0 },
    { grade: "D", point: 1.0 }
  ];

  function calculate() {
    const gpa = parseFloat(document.getElementById("completedGPA").value);
    const completedCredits = parseFloat(document.getElementById("completedCredits").value);
    const remainingCredits = parseFloat(document.getElementById("remainingCredits").value);
    const targetGPA = parseFloat(document.getElementById("targetGPA").value);
    const output = document.getElementById("output");

    if (isNaN(gpa) || isNaN(completedCredits) || isNaN(remainingCredits) || isNaN(targetGPA)) {
      output.textContent = "â— Please fill in all fields with valid numbers.";
      return;
    }

    const totalCredits = completedCredits + remainingCredits;
    const requiredTotalPoints = targetGPA * totalCredits;
    const currentPoints = gpa * completedCredits;
    const requiredRemainingPoints = requiredTotalPoints - currentPoints;
    const requiredGPA = requiredRemainingPoints / remainingCredits;

    if (requiredGPA > 4.0) {
      output.innerText = `âŒ Itâ€™s not possible to reach a GPA of ${targetGPA.toFixed(2)}. You would need an average GPA of ${requiredGPA.toFixed(2)} in the remaining ${remainingCredits} credits.`;
      return;
    }

    // Allocation logic by credits
    const combinations = [];
    let attempts = 0;

    function findCombinations(remainingPoints, remainingCreds, path = {}, start = 0) {
      if (attempts >= 5) return;
      if (remainingCreds === 0 && Math.abs(remainingPoints) < 0.01) {
        combinations.push({ ...path });
        attempts++;
        return;
      }
      if (remainingCreds <= 0 || remainingPoints < 0) return;

      for (let i = start; i < gradeTable.length; i++) {
        const { grade, point } = gradeTable[i];
        path[grade] = (path[grade] || 0) + 1;
        findCombinations(remainingPoints - point, remainingCreds - 1, path, i);
        path[grade]--;
      }
    }

    findCombinations(requiredRemainingPoints, remainingCredits);

    let message = `âœ… You need to average at least GPA ${requiredGPA.toFixed(2)} in the remaining ${remainingCredits} credits.\n\nðŸŽ¯ Possible Grade Allocations (by credits):\n`;
    if (combinations.length === 0) {
      message += "âš ï¸ No feasible combinations found with common grades.";
    } else {
      combinations.forEach((combo, index) => {
        const parts = [];
        for (const [grade, count] of Object.entries(combo)) {
          if (count > 0) parts.push(`${count} ${grade} credits`);
        }
        message += `Option ${index + 1}: ${parts.join(", ")}\n`;
      });
    }

    output.innerText = message;
  }
</script>

</body>
</html>
