<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GPA Calculator</title>
  <style>
    body {
      background-color: #f0f4f8;
      font-family: Arial, sans-serif;
      color: #333;
      max-width: 700px;
      margin: auto;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #2d6a4f;
      color: white;
      font-weight: bold;
      cursor: pointer;
      border: none;
    }
    button:hover {
      background-color: #40916c;
    }
    .result {
      margin-top: 20px;
      font-weight: bold;
    }
    .combo {
      background: #e0f7e9;
      border: 1px solid #a5d6a7;
      border-radius: 6px;
      padding: 10px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<h1>üéì GPA Calculator + Grade Allocation</h1>

<p>Enter your current GPA and credit information. The tool will calculate what GPA you need and show up to 5 ways to allocate your grades (A+, A, B+, etc.) to reach your goal.</p>

<label>Current GPA:</label>
<input type="number" id="completedGPA" step="0.01">

<label>Credits Completed:</label>
<input type="number" id="completedCredits">

<label>Remaining Credits:</label>
<input type="number" id="remainingCredits">

<label>Target GPA:</label>
<input type="number" id="targetGPA" step="0.01">

<button onclick="calculate()">Calculate</button>

<div class="result" id="output"></div>

<script>
  const gradeOptions = [
    { grade: "A+", gpa: 4.0 },
    { grade: "A", gpa: 3.7 },
    { grade: "B+", gpa: 3.5 },
    { grade: "B", gpa: 3.0 },
    { grade: "C+", gpa: 2.5 },
    { grade: "C", gpa: 2.0 },
    { grade: "D+", gpa: 1.5 },
    { grade: "D", gpa: 1.0 }
  ];

  function calculate() {
    const completedGPA = parseFloat(document.getElementById("completedGPA").value);
    const completedCredits = parseFloat(document.getElementById("completedCredits").value);
    const remainingCredits = parseFloat(document.getElementById("remainingCredits").value);
    const targetGPA = parseFloat(document.getElementById("targetGPA").value);

    const outputDiv = document.getElementById("output");
    outputDiv.innerHTML = "";

    if (isNaN(completedGPA) || isNaN(completedCredits) || isNaN(remainingCredits) || isNaN(targetGPA)) {
      outputDiv.textContent = "‚ùó Please fill in all fields with valid numbers.";
      return;
    }

    const totalCredits = completedCredits + remainingCredits;
    const totalRequiredPoints = targetGPA * totalCredits;
    const currentPoints = completedGPA * completedCredits;
    const requiredPoints = totalRequiredPoints - currentPoints;
    const requiredGPA = requiredPoints / remainingCredits;

    outputDiv.innerHTML += `<p>üéØ You need an average GPA of <strong>${requiredGPA.toFixed(3)}</strong> in the next ${remainingCredits} credits.</p>`;

    if (requiredGPA > 4.0) {
      outputDiv.innerHTML += `<p>‚ùå It's not possible to reach the target GPA with the remaining credits.</p>`;
      return;
    }

    const numSubjects = remainingCredits / 3;
    const results = [];

    function search(combo = [], sum = 0, depth = 0) {
      if (depth === numSubjects) {
        const avg = sum / numSubjects;
        if (avg >= requiredGPA && results.length < 5) {
          const count = {};
          combo.forEach(g => count[g] = (count[g] || 0) + 1);
          results.push(count);
        }
        return;
      }

      for (let option of gradeOptions.slice(0, 4)) { // only allow A+, A, B+, B
        search([...combo, option.grade], sum + option.gpa, depth + 1);
      }
    }

    search();

    if (results.length === 0) {
      outputDiv.innerHTML += `<p>‚ö†Ô∏è No valid combinations found with A+, A, B+, or B grades only.</p>`;
    } else {
      outputDiv.innerHTML += `<h3>üßÆ Possible Grade Allocations:</h3>`;
      results.forEach((combo, i) => {
        let list = Object.entries(combo).map(([k, v]) => `${v} √ó ${k}`).join(", ");
        outputDiv.innerHTML += `<div class="combo">Option ${i + 1}: ${list}</div>`;
      });
    }
  }
</script>

</body>
</html>
